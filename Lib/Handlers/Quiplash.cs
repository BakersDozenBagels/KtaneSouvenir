using System.Collections.Generic;
using System.Linq;
using Souvenir;
using UnityEngine;

using static Souvenir.AnswerLayout;

public enum SQuiplash
{
    [SouvenirQuestion("What number was shown on {0}?", ThreeColumns6Answers, "101", "102", "103", "107", "109", "127", "128", "130", "148", "149", "15", "154", "160", "162", "18", "181", "183", "189", "190", "191", "194", "196", "200", "204", "209", "21", "215", "220", "23", "243", "244", "246", "249", "250", "252", "253", "255", "257", "260", "263", "267", "268", "27", "271", "275", "277", "28", "288", "296", "309", "313", "316", "32", "323", "324", "326", "336", "340", "341", "348", "351", "352", "353", "359", "36", "360", "369", "370", "372", "373", "374", "382", "386", "391", "40", "407", "412", "415", "42", "43", "431", "441", "444", "445", "50", "507", "510", "515", "525", "526", "527", "53", "530", "532", "533", "536", "538", "54", "540", "542", "545", "547", "548", "551", "557", "562", "565", "566", "57", "572", "574", "58", "581", "582", "62", "63", "64", "68001", "68005", "68014", "68016", "68024", "68029", "68030", "68031", "68033", "68037", "68042", "68043", "68045", "68053", "68056", "68072", "68074", "68076", "68081", "68087", "68092", "68097", "68103", "68108", "68112", "68121", "68127", "68131", "68135", "68136", "68137", "68174", "68182", "68185", "68214", "68227", "68233", "68274", "68278", "68295", "68298", "68310", "68329", "68339", "68369", "68374", "68375", "68405", "68407", "68419", "68428", "68430", "68434", "68436", "68452", "68456", "68458", "68459", "68470", "68475", "68478", "68481", "68482", "68487", "68492", "68494", "68496", "68497", "68507", "68510", "68517", "68519", "68523", "68528", "68531", "68532", "68534", "68540", "68541", "68542", "68543", "68544", "68545", "68546", "68552", "68555", "68556", "68557", "68559", "68561", "68562", "68564", "68565", "68568", "68570", "68571", "68574", "68575", "68579", "68580", "68581", "68583", "68584", "68585", "68590", "68592", "68593", "68595", "68597", "68603", "68605", "68607", "68610", "68615", "68618", "68619", "68622", "68624", "68627", "68629", "68630", "68636", "68638", "68639", "68641", "68643", "68645", "68653", "68655", "68656", "68659", "68661", "68663", "68666", "68668", "68677", "68710", "68714", "68739", "68756", "68762", "68798", "68799", "68805", "68812", "68818", "68819", "68827", "68829", "68835", "68836", "68838", "68842", "68843", "68846", "68865", "68882", "68883", "68884", "68887", "68891", "68896", "68899", "68914", "68917", "68923", "68926", "68928", "68930", "68932", "68934", "68943", "68954", "68955", "68965", "68973", "68974", "68975", "68995", "68996", "68999", "69000", "69003", "69004", "69006", "69008", "69012", "69014", "69017", "69019", "69023", "69024", "69026", "69034", "69035", "69038", "69044", "69055", "69073", "69076", "69087", "69175", "69176", "69177", "69180", "69229", "69241", "69245", "69248", "69308", "69319", "69322", "69323", "69324", "69328", "69329", "69331", "69336", "69340", "69352", "69356", "69360", "69362", "69378", "69379", "69383", "69391", "69393", "69398", "69401", "69408", "69411", "69432", "69433", "69448", "69449", "69454", "69458", "69459", "69467", "69477", "69478", "69506", "69508", "69509", "69516", "69517", "69523", "69525", "69798", "69800", "69804", "69812", "69829", "69836", "69851", "69855", "69857", "69865", "69866", "69868", "69872", "69873", "69876", "69878", "69885", "69891", "69900", "69903", "69905", "69906", "69909", "69913", "69921", "69923", "69926", "69928", "69929", "69932", "69945", "69947", "69968", "69971", "69973", "69977", "69979", "69981", "70", "70004", "70005", "70007", "70014", "70018", "70029", "70031", "70068", "70080", "70109", "70156", "70161", "70166", "70168", "70244", "70560", "70723", "71100", "71136", "71231", "71329", "72", "75", "81", "87", "92")]
    Number
}

public partial class SouvenirModule
{
    [SouvenirHandler("QLModule", "Quiplash", typeof(SQuiplash), "Anonymous")]
    private IEnumerator<SouvenirInstruction> ProcessQuiplash(ModuleData module)
    {
        yield return WaitForSolve;

        var comp = GetComponent(module, "QLModule");
        var config = GetField<object>(comp, "ChosenConfig").Get();
        var id = GetField<string>(config, "id", true).Get(v => !Question.QuiplashNumber.GetAnswers().Contains(v) ? "Unexpected number" : null);

        foreach (var t in GetArrayField<TextMesh>(comp, "PromptTexts", true).Get())
            t.text = "Quiplash!";

        yield return question(SQuiplash.Number).Answers(id);
    }
}